# Diverga v6.6.2 Release Notes

## Multi-CLI Compatibility Edition

**Release Date**: 2026-01-30
**Version**: 6.6.2
**NPM Package**: `@diverga/codex-setup@6.6.2`

---

## Overview

Diverga v6.6.2 introduces **Multi-CLI Compatibility** - enabling Diverga to work seamlessly across Claude Code, Codex CLI, and OpenCode. This release provides:

- **Adapter templates** for CLI-specific configurations
- **Unified installation script** (`install-multi-cli.sh`)
- **NPM package** for easy Codex CLI setup (`npx @diverga/codex-setup`)
- **Updated model mapping** with GPT-5.2-Codex support
- **diverga-docs** improvements with proper language separation

---

## Core Philosophy

> **"One Research Coordinator, Multiple CLI Platforms"**
> **"í•˜ë‚˜ì˜ Research Coordinator, ë‹¤ì–‘í•œ CLI í”Œë«í¼"**

---

## What's New

### 1. Multi-CLI Architecture

Diverga now supports three CLI tools with different invocation patterns:

```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚         Diverga Research Coordinator    â”‚
                          â”‚         40 Agents | 8 Categories        â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                           â”‚                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Claude Code  â”‚           â”‚   Codex CLI   â”‚           â”‚   OpenCode    â”‚
            â”‚    (Native)   â”‚           â”‚   (Adapted)   â”‚           â”‚ (oh-my-oc)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Task(subagent="diverga:a1")  â”‚   â”‚ Read SKILL.md â”‚   â”‚ Task(subagent="diverga:a1")  â”‚
    â”‚ Full parallel execution       â”‚   â”‚ Follow instns â”‚   â”‚ oh-my-opencode compatible    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Adapter Templates

New `adapters/` directory with CLI-specific configuration templates:

| Template | Purpose | Target Path |
|----------|---------|-------------|
| `AGENTS.md.template` | Codex CLI bootstrap | `~/.codex/diverga/AGENTS.md` |
| `oh-my-opencode.template.json` | OpenCode configuration | `~/.config/opencode/oh-my-opencode.json` |
| `claude-settings.template.json` | Claude Code settings | `~/.claude/plugins/diverga/settings.json` |

### 3. Unified Installation Script

New `scripts/install-multi-cli.sh` for installing Diverga on any CLI:

```bash
# Install for all CLI tools
curl -sSL https://raw.githubusercontent.com/HosungYou/Diverga/main/scripts/install-multi-cli.sh | bash

# Or install for specific CLI only
curl -sSL https://raw.githubusercontent.com/HosungYou/Diverga/main/scripts/install-multi-cli.sh | bash -s -- --claude
curl -sSL https://raw.githubusercontent.com/HosungYou/Diverga/main/scripts/install-multi-cli.sh | bash -s -- --codex
curl -sSL https://raw.githubusercontent.com/HosungYou/Diverga/main/scripts/install-multi-cli.sh | bash -s -- --opencode
```

### 4. NPM Package for Codex CLI

New `@diverga/codex-setup` NPM package with interactive TUI:

```bash
# Run in a REGULAR terminal (NOT inside Codex CLI!)
npx @diverga/codex-setup
```

> **âš ï¸ IMPORTANT**: Installation must be run in a **regular terminal** (Terminal.app, iTerm, VS Code terminal), NOT inside Codex CLI or OpenCode. Running inside the CLI will cause interactive prompt failures.

### 5. Updated Model Mapping

| Tier | Claude Code | Codex CLI | OpenCode |
|------|-------------|-----------|----------|
| HIGH | opus | gpt-5.2-codex | per provider |
| MEDIUM | sonnet | gpt-5.1-codex | per provider |
| LOW | haiku | gpt-5.1-codex-mini | per provider |

### 6. Documentation Improvements

- **diverga-docs**: Proper English/Korean language separation
- **README.md**: Added `[!CAUTION]` callout for terminal installation
- **GitHub CI**: Added NPM package build verification

---

## CLI Compatibility Matrix

| Feature | Claude Code | Codex CLI | OpenCode |
|---------|-------------|-----------|----------|
| **Plugin System** | Native | 2025.12 Skills | oh-my-opencode |
| **Task Tool (Subagents)** | Native | Not supported | Supported |
| **SKILL.md Format** | Native | 2025.12 Added | Compatible |
| **Agent Invocation** | `diverga:a1` | Read skill file | `diverga:a1` |
| **Parallel Execution** | Full | Not supported | Full |
| **Model Routing** | opus/sonnet/haiku | gpt-5.2-codex/gpt-5.1-codex/gpt-5.1-codex-mini | per provider |
| **Installation Path** | `~/.claude/plugins/` | `~/.codex/skills/` | `~/.config/opencode/` |

---

## Agent Invocation Patterns

### Claude Code (Native Task Tool)

```python
Task(
    subagent_type="diverga:a1",
    model="opus",
    prompt="Refine this research question: [user input]"
)
```

### Codex CLI (Skill File)

```bash
# Agent behavior is loaded from skill file
cat ~/.codex/skills/diverga/A1-research-question-refiner/SKILL.md
# Then AI follows the instructions in the file
```

### OpenCode (oh-my-opencode)

```python
# Same as Claude Code if oh-my-opencode is installed
Task(
    subagent_type="diverga:a1",
    model="opus",
    prompt="Refine this research question: [user input]"
)
```

---

## Installation Paths

| CLI Tool | Installation Path | Contents |
|----------|-------------------|----------|
| Claude Code | `~/.claude/plugins/diverga/` | agents/, skills/, CLAUDE.md |
| Codex CLI | `~/.codex/diverga/` | AGENTS.md, diverga-codex.cjs |
| Codex CLI | `~/.codex/skills/diverga/` | 40 agent SKILL.md files |
| OpenCode | `~/.config/opencode/plugins/diverga/` | agents/, skills/, plugins |

---

## Directory Structure

```
Diverga/
â”œâ”€â”€ adapters/                      # NEW: CLI-specific templates
â”‚   â”œâ”€â”€ AGENTS.md.template         # Codex CLI bootstrap
â”‚   â”œâ”€â”€ oh-my-opencode.template.json  # OpenCode config
â”‚   â”œâ”€â”€ claude-settings.template.json # Claude Code settings
â”‚   â””â”€â”€ README.md                  # Adapter documentation
â”‚
â”œâ”€â”€ agents/                        # 40 agent definitions
â”‚   â”œâ”€â”€ a1.md ... h2.md
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ install-multi-cli.sh       # NEW: Unified installer
â”‚   â”œâ”€â”€ install.sh                 # Claude Code only
â”‚   â”œâ”€â”€ install-codex.sh           # Codex CLI only
â”‚   â””â”€â”€ install-opencode.sh        # OpenCode only
â”‚
â””â”€â”€ skills/                        # SKILL.md format agents
    â””â”€â”€ research-agents/
        â”œâ”€â”€ A1-research-question-refiner/
        â”œâ”€â”€ A2-theoretical-framework-architect/
        â””â”€â”€ ... (40 agents)
```

---

## QA Protocol v3.0.3

This release also includes QA Protocol v3.0.3 with:

- **Multi-CLI Testing**: Verified agent invocation across Claude Code, Codex CLI
- **QUANT-001**: Experimental design scenario tested with Codex CLI (6/6 verification checks passed)
- **Documentation**: CLI tool capability differences documented

---

## Commits

| Commit | Description |
|--------|-------------|
| `c49f5b1` | docs: Update Codex CLI model mapping to GPT-5.2-Codex |
| `d632ae4` | docs: Clarify that Codex/OpenCode setup runs in regular terminal |
| `e4bf261` | docs: Update README and CI for v6.6.2 |
| `eff3b72` | docs(release): Add v6.6.2 Multi-CLI Compatibility Edition release notes |
| `6cfabe8` | feat(multi-cli): Add Multi-CLI compatibility adapters (v3.0.3) |

---

## Migration from v6.6.1

No breaking changes. Simply update your Diverga installation:

```bash
# Update existing installation
curl -sSL https://raw.githubusercontent.com/HosungYou/Diverga/main/scripts/install-multi-cli.sh | bash
```

---

## What's Next

- **v6.7.0**: OpenCode testing with oh-my-opencode
- **v7.0.0**: Enhanced parallel document processing

---

## Related Documentation

- [QA Protocol v3.0 Release Notes](../../qa/RELEASE-v3.0.md)
- [Adapters README](../../adapters/README.md)
- [Getting Started Guide](https://diverga-docs-wfl9.vercel.app/getting-started)

---

**Made with ğŸŒŸ for Social Science Researchers**

*Diverga v6.6.2: One Coordinator, Every Platform.*
