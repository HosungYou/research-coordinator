# Diverga QA Test Scenario: QUAL-001
# Qualitative Research Pipeline Test (Phenomenology)
# Tests paradigm detection, C2 agent, and qualitative design workflow

scenario:
  id: QUAL-001
  name: "Phenomenology Study Design"
  description: |
    Tests qualitative research workflow including:
    - Paradigm detection (qualitative)
    - CP_PARADIGM_SELECTION checkpoint
    - CP_THEORY_SELECTION for phenomenological approach
    - C2-QualitativeDesignConsultant agent invocation
  paradigm: qualitative
  priority: high

agents_expected:
  primary: C2-QualitativeDesignConsultant
  secondary:
    - A1-ResearchQuestionRefiner
    - A5-ParadigmWorldviewAdvisor
    - D2-InterviewFocusGroupSpecialist
    - E2-QualitativeCodingSpecialist

checkpoints_required:
  - id: CP_PARADIGM_SELECTION
    level: REQUIRED
    validation:
      must_halt: true
      must_present_alternatives: true
      min_alternatives: 4
      must_wait_approval: true

  - id: CP_THEORY_SELECTION
    level: REQUIRED
    validation:
      must_halt: true
      must_present_alternatives: true
      min_alternatives: 3
      must_show_t_scores: true
      must_wait_approval: true

  - id: CP_METHODOLOGY_APPROVAL
    level: REQUIRED
    validation:
      must_halt: true
      must_summarize_design: true
      must_wait_approval: true

conversation_flow:
  - turn: 1
    user_input: |
      I want to explore the lived experience of teachers using AI in classrooms.
      I'm interested in understanding how they make sense of this new technology
      in their daily practice.

    expected_behaviors:
      paradigm_detection: qualitative
      keyword_matches:
        - "lived experience"
        - "teachers"
        - "AI"
        - "understanding"
        - "daily practice"
      checkpoint_trigger: CP_PARADIGM_SELECTION
      explicit_wait: true
      no_auto_proceed: true

    expected_response_elements:
      vs_alternatives:
        option_a:
          label: "Phenomenology"
          description: "Explore lived experience and meaning-making"
          t_score_range: [0.50, 0.60]
          recommended: true
        option_b:
          label: "Grounded Theory"
          description: "Develop theory from data through constant comparison"
          t_score_range: [0.40, 0.50]
          recommended: false
        option_c:
          label: "Case Study"
          description: "In-depth exploration of bounded system"
          t_score_range: [0.35, 0.45]
          recommended: false
        option_d:
          label: "Narrative Inquiry"
          description: "Explore stories and meaning through narrative"
          t_score_range: [0.25, 0.35]
          recommended: false
      explicit_wait: true
      no_auto_proceed: true

  - turn: 2
    user_input: "[A] Phenomenology"

    expected_behaviors:
      decision_logged: true
      agent_invoked: C2-QualitativeDesignConsultant
      model_tier: opus
      checkpoint_trigger: CP_THEORY_SELECTION
      explicit_wait: true
      no_auto_proceed: true

    expected_response_elements:
      vs_alternatives:
        option_a:
          label: "Descriptive Phenomenology (Husserl)"
          description: "Bracketing and eidetic reduction"
          t_score_range: [0.55, 0.65]
          recommended: false
        option_b:
          label: "Interpretive Phenomenology (Heidegger/van Manen)"
          description: "Hermeneutic circle and interpretation"
          t_score_range: [0.40, 0.50]
          recommended: true
        option_c:
          label: "IPA (Interpretative Phenomenological Analysis)"
          description: "Idiographic focus with systematic analysis"
          t_score_range: [0.30, 0.40]
          recommended: false
      explicit_wait: true
      no_auto_proceed: true

  - turn: 3
    user_input: "[B] Interpretive Phenomenology"

    expected_behaviors:
      decision_logged: true
      checkpoint_trigger: CP_METHODOLOGY_APPROVAL
      explicit_wait: true
      no_auto_proceed: true

    expected_response_elements:
      design_summary: true
      explicit_wait: true

validation_rules:
  required_checkpoints_count: 3
  required_agents:
    - C2-QualitativeDesignConsultant
  checkpoint_sequence:
    - CP_PARADIGM_SELECTION
    - CP_THEORY_SELECTION
    - CP_METHODOLOGY_APPROVAL

t_score_expectations:
  overall_range:
    min: 0.25
    max: 0.65
  spread_requirement: 0.30

grading:
  checkpoint_weight: 0.40
  agent_accuracy_weight: 0.35
  vs_quality_weight: 0.25

tags:
  - qualitative
  - phenomenology
  - lived-experience
  - C2

estimated_duration_minutes: 15
